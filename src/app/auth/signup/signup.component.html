<section class="signup">
  <div class="card">
    <div class="form-signup">
      <form [formGroup]="signUpForm" (ngSubmit)="onSignup($event)">
        <div class="alert alert-danger alert-dismissible mb-4" role="alert" *ngIf="error">
          <button type="button" class="close" data-dismiss="alert" aria-label="Close" (click)="error = ''">
            <span aria-hidden="true">&times;</span>
          </button>
          <span><strong>Sorry !</strong> {{ error }}</span>
        </div>

        <div [hidden]="otpGenerated">
          <div class="row">
            <div class="form-group col mb-4">
              <label for="firstName">First name</label>
              <input
                type="text"
                class="form-control"
                id="firstName"
                aria-describedby="descriptionFirstName"
                formControlName="firstName"
                [ngClass]="{ 'is-invalid': submitted && f.firstName.errors }"
                required
              />
              <div class="invalid-feedback">
                First name is required.
              </div>
              <small id="descriptionFirstName" hidden="true" class="form-text text-muted"
                >Please enter your first name.</small
              >
            </div>
            <div class="form-group col mb-4">
              <label for="lastName">Last name</label>
              <input
                type="text"
                class="form-control"
                id="lastName"
                aria-describedby="descriptionLastName"
                formControlName="lastName"
                [ngClass]="{ 'is-invalid': submitted && f.lastName.errors }"
                required
              />
              <div class="invalid-feedback">
                Last name is required.
              </div>
              <small id="descriptionLastName" hidden="true" class="form-text text-muted"
                >Please enter your last name.</small
              >
            </div>
          </div>

          <div class="form-group mb-4">
            <label for="phoneNumber">Phone number</label>
            <input
              type="text"
              class="form-control"
              id="phoneNumber"
              aria-describedby="descriptionPhoneNumber"
              formControlName="phoneNumber"
              [ngClass]="{ 'is-invalid': submitted && f.phoneNumber.errors }"
              required
            />
            <div class="invalid-feedback">
              Phone number is required
            </div>
            <small id="descriptionPhoneNumber" class="form-text text-muted">
              Your phone number will be used as the username for login.
            </small>
          </div>

          <!-- <div class="form-group mb-4">
      <label for="email">Email</label>
      <input type="email" class="form-control" id="email" formControlName="email" [ngClass]="{'is-invalid': submitted && f.email.errors}">
      <small id="passwordHelpBlock" class="form-text text-muted">
       Your email can also be used to receive OTP for login.
      </small>
  
    </div> -->

          <div class="form-group mb-4">
            <label for="address">City</label>
            <input
              type="text"
              class="form-control"
              id="address"
              aria-describedby="addressHelpBlock"
              formControlName="address"
              [ngClass]="{ 'is-invalid': submitted && f.address.errors }"
              appGooglePlaces
              [addressType]="'(cities)'"
              (onPlaceSelect)="updateAddress($event)"
              placeholder="Search your city"
              required
            />
            <div class="invalid-feedback">
              City is required
            </div>
            <small id="addressHelpBlock" class="form-text text-muted">
              Your city helps us finding the best tutor for you in your area.
            </small>
          </div>

          <div *ngIf="showLoadingOverlay" class="text-center mb-3 mt-5">
            <app-tf-spinner></app-tf-spinner>
          </div>

          <hr class="mb-4" />

          <button class="btn btn-primary btn-lg btn-block" (click)="onSendOtp()">
            Continue
          </button>
        </div>

        <div *ngIf="otpGenerated" class="mt-5 mb-3">
          <app-tf-otp-input
            (login)="setPassword($event)"
            (resendOtp)="onSendOtp()"
            [isPhoneValid]="true"
          ></app-tf-otp-input>
          <hr class="mb-4" />

          <button class="btn btn-primary btn-lg btn-block" type="submit">
            Submit
          </button>
        </div>
      </form>
    </div>
  </div>
</section>

<p-blockUI [blocked]="showLoadingOverlay"></p-blockUI>
